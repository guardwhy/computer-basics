## 1-TCP控制

### 1.1 案例一

![](https://guardwhy.oss-cn-beijing.aliyuncs.com/img/javaEE/Spring/Test5/20210413111111.png)

> **案例分析**

主机甲的发送窗口为4000字节，主机甲向主机乙连续发送两个最大段，共2000字节。也就是将发送窗口内序号0~1999的字节数据发送出去，主机乙给主机甲发送针对第一段的确认，并在该确认中给出自己当前的接收窗口大小为2000字节。主机甲收到该确认后，将发送窗口向前滑动，使已发送并收到确认的第一个段的序号移出发送窗口。由于主机乙在确认中给出的自己的接收窗口大小为2000字节，因此主机甲相应地将自己的发送窗口调整为2000字节，很显然，主机甲还可以向主机乙发送2000~2999号字节数据，共1000个字节。

### 1.2 案例二

![](https://guardwhy.oss-cn-beijing.aliyuncs.com/img/javaEE/Spring/Test5/20210414213400.png)

> **案例分析**

当拥塞窗口值增大到慢开始门限的初始值时，停止使用慢开始算法。转而执行拥塞避免算法，当拥塞窗口值增大到16KB时发送了超时重传。于是将慢开始门限值更新为当前拥塞窗口值的一半，并将拥塞窗口值减小为1KB，并重新开始执行慢开始算法。当拥塞窗口值增大到新的慢开始门限时，停止使用慢开始算法。转而执行拥塞避免算法，可以看到。==该处就是题目所问的、在超时后的4个往返时间后，也就是在超时后的4个传输轮次结束后，拥塞窗口值增长到9KB==。

### 1.3 案例三

![](https://guardwhy.oss-cn-beijing.aliyuncs.com/img/javaEE/Spring/Test5/20210415221844.png)

### 1.4 案例四

![](https://guardwhy.oss-cn-beijing.aliyuncs.com/img/javaEE/Spring/Test5/20210415221946.png)

> **流程步骤**

由于TCP规定只能对按序到达的最高序号进行确认，因此主机乙发送的确认报文段实际上是对第一个数据报文段的确认。由于第一个数据报文段数据载荷的最后一个字节的序号为499，因此针对该序号的确认序号应为500，表明序号499为止的全部数据已经收到了，现在希望接收500号及其后续数据。

## 2- TCP的运输连接管理

### 2.1 案例一

![](https://guardwhy.oss-cn-beijing.aliyuncs.com/img/javaEE/Spring/Test5/20210415233944.png)

> **分析流程**

主机甲中的是TCP客户进程，主机乙中的是TCP服务器，TCP发送连接请求，其首部中的同步位SYN的值为1，序号字段seq的值就是题目所给的11220。发送的TCP连接请求确认报文段，其首部中的同步位SYN和确认位ACK的值都被设置为1，表明这是一个TCP连接请求确认报文段，确认号字段ack值是对主机甲中TCP客户进程所选择初始序号11220的确认，因此为11221。序号字段seq的值，是主机乙中TCP服务器进程所选择的初始序号，可由TCP服务器进程随意指定，与其他报文段的值无关。序号字段seq的值恰好与确认号字段ack的值同为11221。